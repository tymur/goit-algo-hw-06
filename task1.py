import networkx as nx
import matplotlib.pyplot as plt

# === –°—Ç–≤–æ—Ä—é—î–º–æ –≥—Ä–∞—Ñ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏—Ö —Å—Ç–∞–Ω—Ü—ñ–π –ö–∏—ó–≤—Å—å–∫–æ–≥–æ –º–µ—Ç—Ä–æ–ø–æ–ª—ñ—Ç–µ–Ω—É ===
G = nx.Graph()

# –ß–µ—Ä–≤–æ–Ω–∞ –ª—ñ–Ω—ñ—è (M1)
m1_stations = ["–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç", "–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞", "–•—Ä–µ—â–∞—Ç–∏–∫", "–ê—Ä—Å–µ–Ω–∞–ª—å–Ω–∞"]
G.add_nodes_from(m1_stations, line='M1', color='red')
G.add_edges_from([
    ("–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç", "–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞"),
    ("–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞", "–•—Ä–µ—â–∞—Ç–∏–∫"),
    ("–•—Ä–µ—â–∞—Ç–∏–∫", "–ê—Ä—Å–µ–Ω–∞–ª—å–Ω–∞")
])

# –°–∏–Ω—è –ª—ñ–Ω—ñ—è (M2)
m2_stations = ["–ö–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤–∞ –ø–ª–æ—â–∞", "–ü–æ—à—Ç–æ–≤–∞ –ø–ª–æ—â–∞", "–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ", "–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤", "–û–ª—ñ–º–ø—ñ–π—Å—å–∫–∞"]
G.add_nodes_from(m2_stations, line='M2', color='blue')
G.add_edges_from([
    ("–ö–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤–∞ –ø–ª–æ—â–∞", "–ü–æ—à—Ç–æ–≤–∞ –ø–ª–æ—â–∞"),
    ("–ü–æ—à—Ç–æ–≤–∞ –ø–ª–æ—â–∞", "–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ"),
    ("–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ", "–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤"),
    ("–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤", "–û–ª—ñ–º–ø—ñ–π—Å—å–∫–∞")
])

# –ó–µ–ª–µ–Ω–∞ –ª—ñ–Ω—ñ—è (M3)
m3_stations = ["–õ—É–∫‚Äô—è–Ω—ñ–≤—Å—å–∫–∞", "–ó–æ–ª–æ—Ç—ñ –≤–æ—Ä–æ—Ç–∞", "–ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É", "–ö–ª–æ–≤—Å—å–∫–∞", "–ü–µ—á–µ—Ä—Å—å–∫–∞", "–î—Ä—É–∂–±–∏ –Ω–∞—Ä–æ–¥—ñ–≤", "–í–∏–¥—É–±–∏—á—ñ"]
G.add_nodes_from(m3_stations, line='M3', color='green')
G.add_edges_from([
    ("–õ—É–∫‚Äô—è–Ω—ñ–≤—Å—å–∫–∞", "–ó–æ–ª–æ—Ç—ñ –≤–æ—Ä–æ—Ç–∞"),
    ("–ó–æ–ª–æ—Ç—ñ –≤–æ—Ä–æ—Ç–∞", "–ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É"),
    ("–ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É", "–ö–ª–æ–≤—Å—å–∫–∞"),
    ("–ö–ª–æ–≤—Å—å–∫–∞", "–ü–µ—á–µ—Ä—Å—å–∫–∞"),
    ("–ü–µ—á–µ—Ä—Å—å–∫–∞", "–î—Ä—É–∂–±–∏ –Ω–∞—Ä–æ–¥—ñ–≤"),
    ("–î—Ä—É–∂–±–∏ –Ω–∞—Ä–æ–¥—ñ–≤", "–í–∏–¥—É–±–∏—á—ñ")
])

# –ü–µ—Ä–µ—Å–∞–¥–æ—á–Ω—ñ –≤—É–∑–ª–∏
transfer_stations = [
    ("–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞", "–ó–æ–ª–æ—Ç—ñ –≤–æ—Ä–æ—Ç–∞"),          # M1 <-> M3
    ("–•—Ä–µ—â–∞—Ç–∏–∫", "–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ"),      # M1 <-> M2
    ("–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤", "–ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É")         # M2 <-> M3
]
G.add_edges_from(transfer_stations)

# === –§—ñ–∫—Å–æ–≤–∞–Ω—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (–ø—Ä–∏–±–ª–∏–∑–Ω–µ –≥–µ–æ–≥—Ä–∞—Ñ—ñ—á–Ω–µ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è) ===
pos = {
    # –ß–µ—Ä–≤–æ–Ω–∞ –ª—ñ–Ω—ñ—è
    "–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç": (0, 2), "–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞": (0, 1), "–•—Ä–µ—â–∞—Ç–∏–∫": (0, 0), "–ê—Ä—Å–µ–Ω–∞–ª—å–Ω–∞": (1, -0.5),
    # –°–∏–Ω—è –ª—ñ–Ω—ñ—è
    "–ö–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤–∞ –ø–ª–æ—â–∞": (-2, 3), "–ü–æ—à—Ç–æ–≤–∞ –ø–ª–æ—â–∞": (-1, 2), "–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ": (-1, -0.5),
    "–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤": (-1, -1.5), "–û–ª—ñ–º–ø—ñ–π—Å—å–∫–∞": (-1, -2.5),
    # –ó–µ–ª–µ–Ω–∞ –ª—ñ–Ω—ñ—è
    "–õ—É–∫‚Äô—è–Ω—ñ–≤—Å—å–∫–∞": (3, 3), "–ó–æ–ª–æ—Ç—ñ –≤–æ—Ä–æ—Ç–∞": (2, 1), "–ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É": (2, -1), "–ö–ª–æ–≤—Å—å–∫–∞": (3, -2),
    "–ü–µ—á–µ—Ä—Å—å–∫–∞": (4, -3), "–î—Ä—É–∂–±–∏ –Ω–∞—Ä–æ–¥—ñ–≤": (5, -4), "–í–∏–¥—É–±–∏—á—ñ": (6, -5)
}

# === –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞—Ñ–∞ ===
plt.figure(figsize=(12, 8))

# –ö–æ–ª—å–æ—Ä–∏ –≤–µ—Ä—à–∏–Ω
node_colors = [G.nodes[n]['color'] for n in G.nodes()]
# –°—Ç–∏–ª—å —Ä–µ–±–µ—Ä: –ø–µ—Ä–µ—Å–∞–¥–∫–∏ –ø—ñ–¥—Å–≤—ñ—á—É—î–º–æ –æ–∫—Ä–µ–º–∏–º –∫–æ–ª—å–æ—Ä–æ–º
# –°—Ç–∏–ª—å —Ä–µ–±–µ—Ä: –ø–µ—Ä–µ—Å–∞–¥–∫–∏ —Ç–æ–≤—Å—Ç—ñ—à—ñ —ñ –æ—Ä–∞–Ω–∂–µ–≤—ñ
edge_colors = []
edge_widths = []
for u, v in G.edges():
    if (u, v) in transfer_stations or (v, u) in transfer_stations:
        edge_colors.append("orange")  # –ø–µ—Ä–µ—Å–∞–¥–∫–∞
        edge_widths.append(3.5)       # —Ç–æ–≤—â–µ –¥–ª—è –ø–µ—Ä–µ—Å–∞–¥–∫–∏
    else:
        edge_colors.append("gray")    # –∑–≤–∏—á–∞–π–Ω—ñ —Ä–µ–±—Ä–∞
        edge_widths.append(1.5)

# –ú–∞–ª—é—î–º–æ –≥—Ä–∞—Ñ
nx.draw(
    G,
    pos,
    with_labels=True,
    node_color=node_colors,
    edge_color=edge_colors,
    node_size=1500,
    font_size=10,
    font_weight="bold"
)

plt.title("üöá –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ñ —Å—Ç–∞–Ω—Ü—ñ—ó –ö–∏—ó–≤—Å—å–∫–æ–≥–æ –º–µ—Ç—Ä–æ–ø–æ–ª—ñ—Ç–µ–Ω—É –∑ –ø–µ—Ä–µ—Å–∞–¥–∫–∞–º–∏", fontsize=14)
plt.show()
